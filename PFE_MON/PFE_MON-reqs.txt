PFE Monitoring Event Script Requirements

Write Junos Script for below mentioned platforms to check health of
PFE on each FPC by regularly polling below mentioned counters from
cli command "show pfe statistics traffic fpc x".

Script should be generic so that one script can be deployed for all
platforms with current Junos code: MX (12.1R2-S2.1), T-Series & TXP
(12.1R2-S2.1), PTX (12.1X48-D40.3), M320 and M120 (12.1R2-S2.1)

Requested by Nauman Chaudhry <muhammad.n.chaudhry@verizon.com>

Interested Counters:

mnchaudh@XT4.STL3> show pfe statistics traffic fpc 0
Packet Forwarding Engine local traffic statistics:
    Software input control plane drops          :                   0
    Software input high drops                   :                   0
    Software input medium drops                 :                   0
    Software input low drops                    :                   0
    Software output drops                       :                   0
    Hardware input drops                        :              648138
Packet Forwarding Engine hardware discard statistics:
    Timeout                                     :                   0
    Truncated key                               :                   0
    Bits to test                                :                   0
    Data error                                  :                   0
    Stack underflow                             :                   0
    Stack overflow                              :                   0
    Normal discard                              :            51800956
    Extended discard                            :                   0
    Invalid interface                           :                   0
    Info cell drops                             :                   0
    Fabric drops                                :                   4
Packet Forwarding Engine Input IPv4 Header Checksum Error and Output
MTU Error statistics:
    Input Checksum                              :                   0
    Output MTU                                  :                   0


High Level Expected Results from Script:

Compare current_counter_value from previous_counter_value and if it
exceeds from given threshold then generate syslog with brief
description of counter corresponding to FPC and PFE.



Some disruption Scenarios:

Script should be able to adjust itself for at least following
scenarios:

-FPC reset

-RE switchover with NSR and without NSR

-Reload of router
